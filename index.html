<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>
<body>
</body>
<script>
	function getParameterByName(name, url) {
		if(!url) url = window.location.href;
		name = name.replace(/[\[\]]/g, "\\$&");
		//匹配所有符合条件的，并取最后一个
		var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)",'g');
		var results = url.match(regex);
		var tempResults= results!=null && results[results.length-1]!=undefined?results[results.length-1]:'';
		var finalResults=regex.exec(tempResults);
		if(!finalResults) return "";
		if(!finalResults[2]) return '';
		return decodeURIComponent(finalResults[2].replace(/\+/g, " "));
	}
	 if(getParameterByName('code')){
	 	/**重新跳回小程序的方法*/
		wx.miniProgram.reLaunch({url: "/pages/index/index"});
		alert(wx)
	  }else{
		/**公众号授权方法*/
		var uri = window.location.href;
		uri=uri.split("#")[0];
		window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxa4dec186972ad538&redirect_uri="+uri+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";
	  }
  </script>
</script>
</html>
